# 1. ç¼–å†™ä¸€ä¸ªçŒœå­—è°œæ¸¸æˆ
æœ¬æ–‡æˆ‘ä»¬å°†ä¼šç”¨ `Rust` è¯­è¨€å®ç°å‡ºä¸€ä¸ªç»å…¸çš„åˆå­¦è€…çš„ç¼–ç¨‹ç»ƒä¹ ï¼šçŒœå­—è°œæ¸¸æˆã€‚å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š

**(1)** ç¨‹åºä¼šéšæœºäº§ç”Ÿä¸€ä¸ªä»‹äº `1 - 100` ä¹‹é—´çš„æ•´æ•°;

**(2)** å¼€å§‹æç¤ºç©å®¶è¾“å…¥çŒœæµ‹çš„æ•°å­—;

**(3)** ç¨‹åºæç¤ºè¾“å…¥çš„çŒœæµ‹å€¼è¿‡é«˜è¿˜æ˜¯è¿‡ä½ï¼Œè‹¥çŒœæµ‹æ­£ç¡®åˆ™æ‰“å°ç¥è´ºä¿¡æ¯å¹¶é€€å‡ºæ¸¸æˆï¼Œåä¹‹ç»§ç»­ã€‚

<font size=5>**Let's do it**</font>
_____________________________
# 2. åˆ›å»ºæ–°é¡¹ç›®
åœ¨å­¦ä¹ æ–°å†…å®¹æ—¶å€™ï¼Œåˆ‡å‹¿å¿˜è®°å‰é¢å­¦ä¹ çš„å†…å®¹ã€‚ç°åœ¨ï¼Œä½¿ç”¨ `Cargo` åˆ›å»ºæˆ‘ä»¬çš„æ–°é¡¹ç›®ã€‚

```shell
imaginemiracle:rust_projects$ cargo new guessing_game
     Created binary (application) `guessing_game` package
     
imaginemiracle:rust_projects$ cd guessing_game/
imaginemiracle:guessing_game$ ls
Cargo.toml  src
```
å½“ç„¶æˆ‘ä»¬æ˜¯å¯ä»¥ç›´æ¥è¿è¡Œæ–°åˆ›å»ºçš„é¡¹ç›®çš„ï¼Œä½¿ç”¨ `cargo run`ã€‚
```shell
imaginemiracle:guessing_game$ cargo run
   Compiling guessing_game v0.1.0 (/home/imaginemiracle/Miracle/Code/rust_projects/guessing_game)
    Finished dev [unoptimized + debuginfo] target(s) in 0.47s
     Running `target/debug/guessing_game`
Hello, world!
```
# 3. å¼€å§‹åˆæ¬¡ç¼–å†™
å½“ä½¿ç”¨ `cargo new <é¡¹ç›®å>` åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹å…¶ `src` ç›®å½•ä¸‹çš„æºæ–‡ä»¶å³å¯ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸éœ€è¦å¤ªå¤šçš„æ–‡ä»¶ï¼Œåªç”¨åˆ°ä¸€ä¸ª `main.rs` å³å¯ã€‚
```shell
imaginemiracle:guessing_game$ vim src/main.rs 
```
## 3.1. å…ˆå¤„ç†ç”¨æˆ·çš„è¾“å…¥
æ¸¸æˆè¦æ±‚ç©å®¶è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œå¹¶åˆ¤æ–­ã€‚è¿™é‡Œæˆ‘ä»¬å…ˆå®Œæˆè®©ç©å®¶è¾“å…¥å’Œè·å–ç©å®¶è¾“å…¥çš„æ•°å­—è¿™ä¸ªå°åŠŸèƒ½ã€‚

```rust
use std::io;

fn main() {
    println!("Guess the number!");

    println!("Please input your guess.");

    let mut guess = String::new();

    io::stdin()
        .read_line(&mut guess)
        .expect("Failed to read line.");

    println!("You guessed: {}", guess);
}
```
## 3.2. ä»£ç è¯´æ˜â€”â€”01
å…ˆæ¥çœ‹ä¸Šè¿°ä»£ç çš„ç¬¬ä¸€è¡Œã€‚ç”±äºæ¸¸æˆéœ€è¦è·å–ç”¨æˆ·çš„è¾“å…¥å¹¶å°†ç»“æœæ‰“å°åˆ°å±å¹•ï¼Œå› æ­¤è¿™é‡Œå°±éœ€è¦ä½¿ç”¨åˆ°æ ‡å‡†åº“ä¸­çš„ `io` è¾“å…¥/è¾“å‡ºï¼Œå³ `std` æ ‡å‡†åº“ä¸­çš„ `io`ï¼Œå°†å…¶åŒ…å«è¿›æ­¤ç¨‹åºå³å¯ã€‚
```rust
use std::io;
```
çœ‹åˆ°è¿™é‡Œæ˜¯å¦è§‰å¾—ä¸ `c++` ä¸­çš„ `using namespace` å¾ˆæ˜¯ç›¸ä¼¼ï¼Œå…¶ç”¨æ³•ä¹Ÿæ¯”è¾ƒç±»ä¼¼ï¼Œæˆ‘ä»¬è¿™é‡Œä¸è®¨è®º `c++`ï¼ŒæåŠè¯¥è¯é¢˜åªæ˜¯ä¸ºäº†æ›´å¿«çš„ç†Ÿæ‚‰å’Œæ¥å—è¿™ç§ä½¿ç”¨æ–¹æ³•ã€‚

äº‹å®ä¸Šåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œ`Rust` ä¼šå°†æ ‡å‡†åº“ä¸­çš„ä¸€éƒ¨åˆ†å®šä¹‰ï¼Œå¼•å…¥æ¯ä¸€ä¸ªç¨‹åºçš„ä½¿ç”¨èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤åŒ…å«äº†è¿™äº›ã€‚åœ¨ `Rust` é‡Œè¿™äº›è¢«é»˜è®¤å¼•å…¥çš„æ ‡å‡†åº“è¢«ç§°ä½œ [Prelude](https://doc.rust-lang.org/std/prelude/index.html)ã€‚(ä¸ºäº†ä¾¿æ·ï¼Œå¼•å…¥äº†å‡ ä¹æ‰€æœ‰ç¨‹åºéƒ½ä½¿ç”¨åˆ°çš„åº“ã€‚ä¸ºäº†ç²¾ç®€ï¼Œåªå¼•å…¥ä¸€å°éƒ¨åˆ†å‡ ä¹æ‰€æœ‰ç¨‹åºéƒ½éœ€è¦ä½¿ç”¨çš„åº“ã€‚â€”â€”åœ¨ä¾¿æ·å’Œå†—ä½™ä¹‹é—´å¯»æ±‚ `balance`)

è‹¥éœ€è¦ä½¿ç”¨çš„åº“ä¸åœ¨ `Prelude` ä¸­ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨çš„æ˜¾å¼å¼•å…¥ï¼Œéœ€è¦ä½¿ç”¨åˆ°å…³é”®å­— `use`ã€‚ 

### 3.2.1. å‡½æ•°å£°æ˜
```rust
fn main() {
    println!("Guess the number!");

    println!("Please input your guess.");
```
å¦‚æœçœ‹è¿‡ã€Šå°å°ç™½çš„å…¥é—¨å­¦ä¹ ã€‹å‰å‡ ç¯‡ï¼Œé‚£ä¹ˆè¿™ä¸‰è¡Œä»£ç åº”è¯¥ä¼šå®Œå…¨æ²¡æœ‰ç–‘ç‚¹ã€‚

å…³é”®å­— `fn` åœ¨è¿™é‡Œå£°æ˜äº†ä¸€ä¸ªåä¸º `main` çš„æ–°å‡½æ•°ï¼Œ`()` å…¶ä¸­æ²¡æœ‰å†…å®¹ï¼Œåˆ™è¡¨ç¤ºè¯¥å‡½æ•°ä¸å¸¦å‚æ•°ï¼Œ`{` è¡¨ç¤ºç€ `main` å‡½æ•°å‡½æ•°ä½“çš„å¼€å§‹ã€‚

å¦‚ä¸‹ä¸¤è¡Œåˆ™ä½¿ç”¨ `println!` å®å°†å­—ç¬¦ä¸²æ‰“å°åˆ°ç»ˆç«¯å±å¹•ä¸Šã€‚ä»æ–‡å­—æ„æ€å¯ä»¥çœ‹å‡ºï¼Œè¦å¼€å§‹ä¸€ä¸ªä»€ä¹ˆæ¸¸æˆï¼Œå¹¶ä¸”è¿˜éœ€è¦è‡ªå·±è¾“å…¥ã€‚

### 3.2.2. å˜é‡å®šä¹‰
åˆ°äº†è¿™é‡Œå‘ç°éœ€è¦ç©å®¶è¾“å…¥ä¸€ä¸ªæ•°å€¼ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ª**å˜é‡**æ¥ä¿å­˜ç©å®¶çš„è¾“å…¥ã€‚
```rust
    let mut guess = String::new();
```
ä½¿ç”¨å…³é”®å­— `let` åˆ›å»ºäº†ä¸€ä¸ªåä¸º `guess` çš„å˜é‡ï¼Œè¿ç®—ç¬¦ `=` åˆ™è¡¨ç¤ºæˆ‘ä»¬éœ€è¦ä¸ºè¯¥å˜é‡ç»‘å®šä¸€äº›ä¸œè¥¿ã€‚`=` çš„å³ä¾§ä¾¿æ˜¯ç»‘å®šçš„å…·ä½“å€¼ï¼Œè¿™é‡Œä¸º `String::new()`ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª `String` çš„å®ä¾‹ã€‚[String](https://doc.rust-lang.org/std/string/struct.String.html) æ˜¯æ ‡å‡†åº“æä¾›çš„å­—ç¬¦ä¸²ç±»å‹ã€‚

`::` æ˜¯ `Rust` ä¸­çš„ä¸€ç§è¯­æ³•ï¼Œ`String::new()` è¡¨ç¤º `new()` æ˜¯ `String` ç±»å‹çš„å…³è”å‡½æ•°ã€‚å…³è”å‡½æ•°æ˜¯åœ¨è¯¥ç±»å‹ä¸Šå®ç°çš„å…·ä½“å‡½æ•° (å…·ä½“å®šä¹‰å¯ä»¥æŸ¥çœ‹ [Stringæºç çš„446è¡Œ](https://doc.rust-lang.org/src/alloc/string.rs.html#446))ã€‚`new` å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå­—ç¬¦ä¸²ã€‚

å…³é”®å­— `mut` çš„å­˜åœ¨ï¼Œè¡¨ç¤ºè¯¥å˜é‡æ˜¯å¯å˜çš„å˜é‡ã€‚å› ä¸ºåœ¨ `Rust` ä¸­ï¼Œå£°æ˜çš„å˜é‡é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¯å˜çš„ï¼ˆå¦‚ä¸‹ï¼‰ï¼Œè€Œè¿™éƒ¨åˆ†å†…å®¹æˆ‘ä»¬å°†åœ¨åé¢çš„æ–‡ç« é‡Œè¯¦ç»†çš„æè¿°ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœ€åæ‰å¯¹ `mut` å…³é”®å­—ä½œè§£é‡Šçš„åŸå› ã€‚
```rust
let apples = 5;		// å˜é‡ä¸å¯å˜ (immutable)
let mut bananas = 5;	// å˜é‡å¯å˜ (mutable)
```
ç»¼ä¸Šæ‰€è¿°ï¼Œ`let mut guess = String::new();` è¿™è¡Œä»£ç åˆ›å»ºäº†ä¸€ä¸ªå¯å˜çš„å˜é‡ï¼Œå¹¶å°†è¯¥å˜é‡ç»‘å®šäº†ä¸€ä¸ªç©ºçš„æ–° `String` å®ä¾‹ã€‚

### 3.2.3. è·å–æ ‡å‡†è¾“å…¥
OKï¼æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†ä¸€ä¸ªå˜é‡ç”¨æ¥å­˜å‚¨ç©å®¶çš„è¾“å…¥äº†ï¼Œæ˜¯æ—¶å€™è¯¥è®©ç©å®¶åšç‚¹ä»€ä¹ˆäº†ï¼ˆor æ˜¯æˆ‘ä»¬éœ€è¦ä¸ºç©å®¶åšç‚¹ä»€ä¹ˆï¼‰ã€‚
è®°å¾—åœ¨ç¬¬ä¸€è¡Œå°±å·²ç»å¼•å…¥äº†æ ‡å‡†åº“çš„ `io`ï¼Œè¯¥å¥¹å‡ºåœºäº†ï¼
```rust
    io::stdin()
        .read_line(&mut guess)
```
`[æ³¨]: ç»†å¿ƒçš„å°ä¼™ä¼´ä¼šå‘ç°è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯­å¥ï¼Œå› ä¸ºæ²¡æœ‰ â€˜;â€™ ï¼Œåˆ«æ€¥è¿™é‡Œæš‚æ—¶å…ˆçœ‹å¥¹çš„å‰åŠæ®µã€‚`

å¯ä»¥é€šè¿‡è°ƒç”¨ `io` æ ‡å‡†åº“ä¸­çš„ `stdin` å‡½æ•°ç”¨æ¥å¤„ç†ç©å®¶çš„è¾“å…¥ï¼Œæ¥ä¸‹æ¥çš„ `.read_line(&mut guess)` é€šè¿‡è°ƒç”¨ [read_line](https://doc.rust-lang.org/std/io/struct.Stdin.html#method.read_line) æ ‡å‡†è¾“å…¥å¥æŸ„ (`stdin`) ä¸­çš„å‡½æ•°æ¥è·å–ç©å®¶çš„è¾“å…¥åˆ°å…·ä½“å˜é‡ä¸­ (`mut guess`)ã€‚ç¬¦å· `&` è¡¨ç¤ºå¼•ç”¨ï¼Œæœ‰å…³å¼•ç”¨çš„å«ä¹‰è¿™é‡Œå’Œ `c++` ä¸­çš„å¼•ç”¨æ˜¯ç›¸åŒçš„ã€‚å¼•ç”¨æœ¬èº«ä¸ä¼šåˆ†é…å†…å­˜ï¼Œè€Œæ˜¯ç›´æ¥æŒ‡å‘å…¶å¼•ç”¨çš„å†…å­˜ç©ºé—´ï¼Œè¿™æ ·ä½¿ç”¨çš„å¥½å¤„å°±æ˜¯ä»£ç åœ¨å¤šå¤„è®¿é—®ä¸€ä¸ªæ•°æ®æ—¶ï¼Œæ— éœ€å¤šæ¬¡æ‹·è´ï¼Œè€Œç›´æ¥å°†æ•°æ®å¤åˆ¶åˆ°å˜é‡å¯¹åº”çš„å†…å­˜ä¸­ã€‚åœ¨è¿™é‡Œæš‚æ—¶ä¸éœ€è¦æ¸…æ¥šå¤ªå¤šçš„ç»†èŠ‚ï¼Œå› ä¸º `Rust` åœ¨è¿™æ–¹é¢å·²ç»å®ç°çš„å¾ˆå®Œå–„äº†ï¼Œä½ å¯ä»¥éå¸¸å®‰å…¨è€Œå®¹æ˜“çš„å»ä½¿ç”¨å³å¯ã€‚**éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¼ å…¥çš„å‚æ•°æ˜¯ `&mut guess` è€Œé `& guess`ï¼Œä¸¤è€…çš„ä¹¦å†™åŒºåˆ«åœ¨äºå˜é‡æ˜¯å¦å¯å˜ï¼Œè¿™æ˜¯å¾ˆå¤šåˆå­¦è€…éƒ½ä¼šçŠ¯çš„é”™è¯¯ã€‚**

ç”±äºæˆ‘ä»¬åœ¨ç¨‹åºçš„å¼€å¤´å¼•å…¥çš„ `std::io`ï¼Œè¿™é‡Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨ `io::stdin()`ï¼Œ`stdin()` å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª [struct std::io::Stdin](https://doc.rust-lang.org/std/io/struct.Stdin.html) ç±»å‹çš„å®ä¾‹ã€‚

å¦‚æœåœ¨å¼€å§‹å¿˜è®°å¼•å…¥ `std::io`ï¼Œé‚£ä¹ˆåœ¨è¿™é‡Œåˆ™å¯ä»¥è¿™æ ·ä½¿ç”¨ `std::io::stdin()`ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚
#### 3.2.3.1. æœ‰å…³ read_line() çš„å°çŸ¥è¯†
é€šè¿‡ä»£ç ä»¥åŠä¸Šæ–‡æè¿°ï¼Œæˆ‘ä»¬å·²ç»æ¸…æ¥šäº† `read_line(&mut guess)` å‡½æ•°ä¼šè°ƒç”¨æ ‡å‡†è¾“å…¥å¥æŸ„ (`stdin`) ä¸­çš„ `read_line()` å‡½æ•°å°†ç©å®¶è¾“å…¥çš„å†…å®¹ä¿å­˜åˆ° `mut guess` ä¸­ã€‚ä¸ä»…å¦‚æ­¤ï¼Œ`read_line` ä¼šå°†æ ‡å‡†è¾“å…¥çš„ä»»ä½•å†…å®¹**è¿½åŠ **åˆ°å­—ç¬¦ä¸²åï¼ˆä¸ä¼šè¦†ç›–åŸæœ‰å†…å®¹ï¼‰ã€‚çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ä¾¿ä¼šæ¸…æ¥šã€‚
```rust
use std::io;

fn main() {
    println!("read_line test.");

    let mut str = String::new();	// å®šä¹‰ä¸€ä¸ª String ç±»å‹çš„å¯å˜å˜é‡

    println!("Please input something.");

	// ä»æ ‡å‡†è¾“å…¥è·å–å†…å®¹å¹¶æ·»åŠ åˆ° mut str
    io::stdin()
        .read_line(&mut str)
        .expect("Failed to read line.");

	// è¾“å‡º str çš„å†…å®¹
    println!("str = {}", str);

    println!("Please input something again.");

	// å†æ¬¡ä»æ ‡å‡†è¾“å…¥è·å–å†…å®¹å¹¶æ·»åŠ åˆ° mut str
    io::stdin()
        .read_line(&mut str)
        .expect("Failed to read line.");

	// è¾“å‡º str çš„å†…å®¹
    println!("str = {}", str);
}
```
ä¸Šé¢è¿™ä¸ªä¾‹å­çš„è¾“å‡ºå¦‚ä¸‹ï¼š
```shell
imaginemiracle:read_line$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/read_line`
read_line test.
Please input something.
Hello world			# ç¬¬ä¸€æ¬¡çš„è¾“å…¥
str = Hello world	# ç¬¬ä¸€æ¬¡çš„è¾“å‡º
					# ç¬¬ä¸€æ¬¡çš„è¾“å‡º
Please input something again.
I'm ImagineMiracle.	# ç¬¬äºŒæ¬¡çš„è¾“å…¥
str = Hello world	# ç¬¬äºŒæ¬¡çš„è¾“å‡º
I'm ImagineMiracle.	# ç¬¬äºŒæ¬¡çš„è¾“å‡º
					# ç¬¬äºŒæ¬¡çš„è¾“å‡º
```
å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ° `str` é‡Œçš„å†…å®¹ï¼Œåœ¨è°ƒç”¨ä¸¤æ¬¡ `read_line` è·å–æ ‡å‡†è¾“å…¥çš„å†…å®¹åï¼Œå…¨éƒ¨éƒ½ä¼šè¿½åŠ åˆ° `mut str` ä¸­ï¼Œå¹¶ä¸ä¼šè¦†ç›–åŸæœ‰å†…å®¹ã€‚

`[æ³¨]ï¼šæœ‰æ²¡æœ‰å¥½å¥‡ä¸ºä»€ä¹ˆåœ¨ç¬¬äºŒæ¬¡è¾“å‡ºä¸­ Hello world åé¢ä¼šè‡ªåŠ¨æ¢è¡Œï¼Ÿå…¶å®ä¸ç„¶ï¼Œåœ¨ç¬¬ä¸€æ¬¡è¾“å‡ºä¸­çš„ Hello world åé¢ä¹Ÿè¾“å‡ºäº†ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬åœ¨é”®ç›˜è¾“å…¥æ—¶å€™æœ€åæ•²å…¥çš„ Enter å›è½¦é”®å‘ï¼`

### 3.2.4. æ•…éšœå¤„ç†â€”â€”Result
Now! æˆ‘ä»¬æ¥çœ‹è¿™æ¡è¯­å¥çš„æœ€åä¸€éƒ¨åˆ†ã€‚
```rust
        .expect("Failed to read line.");
```
`[æ³¨]: ä¸€èˆ¬å½“ä¸€æ¡è¯­å¥æˆ–è¡¨è¾¾å¼è¾ƒé•¿ï¼Œåˆ™åº”è¯¥åˆç†çš„ä½¿ç”¨â€˜æ¢è¡Œç¬¦â€™å’Œâ€˜ç©ºæ ¼â€™å°†ä¸€æ¡é•¿çš„è¯­å¥åˆ†è§£ï¼Œè¿™æ ·æ˜¯æ˜æ™ºçš„åšæ³•ï¼Œè¿™å°†ä¼šå¸®åŠ©ä½ æˆ–å…¶ä»–äººæ›´å®¹æ˜“çš„é˜…è¯»ä½ çš„ä»£ç ã€‚`

`read_line()` ä¼šå°†æ ‡å‡†è¾“å…¥çš„æ‰€æœ‰å†…å®¹éƒ½æ”¾å…¥ä¼ é€’ç»™å¥¹çš„ `String` ä¸­ï¼Œå¹¶ä¸”ç»™æˆ‘ä»¬è¿”å›ä¸€ä¸ªå€¼ã€‚åœ¨æ­¤å¤„çš„è¿”å›å€¼ç±»å‹ä¸º [io::Result](https://doc.rust-lang.org/std/io/type.Result.html)ï¼ˆ`Rust` åœ¨å…¶æ ‡å‡†åº“æ±‡æ€»ä¸­å®šä¹‰äº†å¤šç§ç±»å‹çš„ `Result`ï¼‰ã€‚

`Result` çš„å˜ä½“æ˜¯ `Ok` å’Œ `Err`ã€‚`Ok` ä»£è¡¨æ“ä½œæ‰§è¡ŒæˆåŠŸï¼Œåä¹‹ `Err` åˆ™è¡¨ç¤ºæ“ä½œå¤±è´¥ï¼Œå¹¶åŒ…å«æ“ä½œå¤±è´¥çš„ä¿¡æ¯ï¼Œä¾›è°ƒè¯•ä½¿ç”¨ã€‚

è€Œ `io::Result` çš„å®ä¾‹å¯ä»¥è°ƒç”¨å¥¹è‡ªå·±çš„ [expect](https://doc.rust-lang.org/std/result/enum.Result.html#method.expect) å‡½æ•°ã€‚å¦‚æœ `io::Result` è¿”å›çš„æ˜¯ `Err`ï¼Œ`expect` åˆ™å°†å¯¼è‡´ç¨‹åºå´©æºƒçš„ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™ `expect`ã€‚(å½“è¿”å› `Err` æ—¶ï¼Œä¸€èˆ¬ä¼šæ˜¯æ“ä½œç³»ç»Ÿåº•å±‚å‘ç”Ÿé”™è¯¯ä¿¡æ¯)ã€‚è‹¥è¿”å›å€¼ä¸º `Ok`ï¼Œé‚£ä¹ˆåœ¨æœ¬æ–‡ç¨‹åºä¸­ `Ok` æ‰€æŒæœ‰çš„è¿”å›å€¼ä¾¿æ˜¯è¾“å…¥çš„å­—èŠ‚æ•°ã€‚

`[æ³¨]: è‹¥ä¸ä½¿ç”¨ â€˜expectâ€™ ç¨‹åºå¯ä»¥æ­£å¸¸é€šè¿‡ç¼–è¯‘ï¼Œä½†ç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Šï¼`

```shell
imaginemiracle:guessing_game$ cargo build
   Compiling guessing_game v0.1.0 (/home/imaginemiracle/Miracle/Code/rust_projects/guessing_game)
warning: unused `Result` that must be used
  --> src/main.rs:10:5
   |
10 | /     io::stdin()
11 | |         .read_line(&mut guess);
   | |_______________________________^
   |
   = note: `#[warn(unused_must_use)]` on by default
   = note: this `Result` may be an `Err` variant, which should be handled

warning: `guessing_game` (bin "guessing_game") generated 1 warning
    Finished dev [unoptimized + debuginfo] target(s) in 0.22s
```
ç”±äºæ²¡æœ‰ä½¿ç”¨ `read_line` çš„è¿”å›å€¼ `Result`ï¼Œè¿™é‡Œ `Rust` ä¼šå‘å‡ºè­¦å‘Šï¼Œè¡¨ç¤ºç¨‹åºæ²¡æœ‰å¤„ç†å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ã€‚
ä¸ºäº†æ²¡æœ‰è­¦å‘Šï¼Œæ­£ç¡®åšæ³•åº”è¯¥æ˜¯åœ¨ç¼–å†™è¿‡ç¨‹ä¸­æ·»åŠ å¥½æ¯ä¸€ä¸ªæ•…éšœå¤„ç†ï¼Œè€Œåœ¨æœ¬ä¾‹ä¸­åªæƒ³åœ¨å‡ºç°é—®é¢˜æ—¶è®©è¿™ä¸ªç¨‹åºå´©æºƒï¼Œå› æ­¤ç›´æ¥ä½¿ç”¨ `expect` å³å¯ã€‚åœ¨ä¹‹åå°†ä¼šæ›´å¤šçš„äº†è§£åˆ°æ•…éšœå¤„ç†ä»¥åŠæ¢å¤ã€‚

### 3.2.5. println! ä½¿ç”¨å ä½ç¬¦æ‰“å°å€¼
å¯¹äºå¦‚ä¸‹ä»£ç ï¼Œè™½ç„¶è¿˜åªæ˜¯åˆšå¼€å§‹å­¦ä¹  `Rust`ï¼Œç›¸ä¿¡çœ‹äº†ä¹‹åä¹Ÿä¼šæ˜ç™½å…¶ä¸­æ¯ä¸ªç¬¦å·çš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚
```rust
    println!("You guessed: {}", guess);
```
è¯¥è¡Œä»£ç ä¼šæ‰“å°å‡ºåŒ…å«ç©å®¶è¾“å…¥çš„å­—ç¬¦ä¸²ã€‚è¿™é‡Œçš„ `{}` æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œè¡¨ç¤ºè¿™é‡Œå°†ä¼šè¾“å‡ºä¸€ä¸ªç”±å…¶å®ƒä»€ä¹ˆæ¥è¡¨ç¤ºçš„å€¼ï¼Œè€Œç¡®å®šå¥¹çš„å…·ä½“å€¼æ˜¯ç”± `,` åé¢çš„å˜é‡å†³å®šï¼Œä»–ä»¬æ˜¯æŒ‰ç…§é¡ºåºçš„è§„åˆ™æ¥ä¸€ä¸€å¯¹åº”ã€‚å½“éœ€è¦æ‰“å°å¤šä¸ªå€¼æ—¶ï¼Œåªéœ€è¦æŒ‰ç…§ `{}`ï¼Œå’Œæ’åˆ—å¥½ä¸å…¶å¯¹åº”çš„å˜é‡å³å¯ã€‚

```rust
fn main() {
let x = 5;
let y = 10;

println!("x = {} and y = {}", x, y);
}
```
è¯¥æ®µç¨‹åºå°†ä¼šè¾“å‡º `x = 5 and y = 10`ã€‚

åŒæ—¶åœ¨ `{}` ä¸­ä¹Ÿå¯ä»¥ç›´æ¥å¡«å…¥éœ€è¦æ‰“å°çš„å˜é‡åç§°ï¼Œåƒå¦‚ä¸‹è¿™æ ·ã€‚

```rust
fn main() {
let x = 5;
let y = 10;

println!("x = {x} and y = {}", y);
}
```

è¯¥æ®µç¨‹åºåŒæ ·ä¼šè¾“å‡º `x = 5 and y = 10`ã€‚

`[æ³¨]ï¼šçªå‘å¥‡æƒ³çš„ä½ ä¼šæƒ³åˆ°ï¼Œé‚£æ˜¯å¦å¯ä»¥åœ¨èŠ±æ‹¬å·ä¸­ç›´æ¥å†™è¡¨è¾¾å¼å‘¢ï¼Ÿä¾‹å¦‚å†™å…¥ y + x æˆ–è€… x + 3ï¼Œå¯ä»¥å—ï¼Ÿä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µå‘¢ï¼Œç­”æ¡ˆæ˜¯ä¸å¯ä»¥ï¼Œå¸Œæœ›å°è¯•çš„è¯»è€…ä»¬å¯ä»¥åšç±»ä¼¼çš„è¯•éªŒï¼Œéå¸¸å»ºè®®è‡ªå·±å»è¯•è¯•ã€‚`
# 4. æµ‹è¯•ç¼–å†™çš„ç¬¬ä¸€éƒ¨åˆ†åŠŸèƒ½
ä¸Šè¿°ä»£ç å·²ç»èƒ½å¤Ÿå®ç°è¯¥æ¸¸æˆçš„ä¸€å°éƒ¨åˆ†åŠŸèƒ½äº†ï¼Œç°åœ¨æ¥æµ‹è¯•å¥¹æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œâ€”â€”ä½¿ç”¨ `cargo run`ã€‚
```shell
imaginemiracle:guessing_game$ cargo run
   Compiling guessing_game v0.1.0 (/home/imaginemiracle/Miracle/Code/rust_projects/guessing_game)
    Finished dev [unoptimized + debuginfo] target(s) in 0.21s
     Running `target/debug/guessing_game`
Guess the number!
Please input your guess.
22
You guessed: 22
```
å·²ç»å®Œæˆçš„åŠŸèƒ½ï¼š
**(1)** è®©ç©å®¶è¾“å…¥æ•°å­—;
**(2)** è·å–è¾“å…¥çš„æ•°å­—ï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚

# 5. ç¼–å†™ç¬¬äºŒéƒ¨åˆ†åŠŸèƒ½â€”â€”äº§ç”Ÿç¥ç§˜æ•°å­—ï¼ˆéšæœºæ•°ï¼‰
è¯¥æ¸¸æˆéœ€è¦ç”Ÿæˆä¸€ä¸ªç§˜å¯†çš„æ•°å­—ï¼Œè®©ç©å®¶æ¥çŒœã€‚è¿™ä¸ªæ•°å­—åº”è¯¥æ¯æ¬¡çš„ä¸åŒï¼Œæˆ–è€…è¯´æ˜¯æ²¡æœ‰è§„å¾‹çš„å‡ºç°ï¼Œè¿™æ ·æ‰æœ‰æ„ä¹‰ã€‚æˆ‘ä»¬å°†æ•°å­—çš„äº§ç”ŸèŒƒå›´è§„å®šåˆ° `1-100`ï¼Œè¿™æ ·ä¸è‡³äºå¤ªéš¾çŒœã€‚åœ¨ `Rust` æ ‡å‡†å“­ä¸­ç›®å‰è¿˜æ²¡æœ‰éšæœºæ•°äº§ç”Ÿå‡½æ•°ã€‚ä¸è¿‡ `Rust` å›¢é˜Ÿæä¾›äº†ä¸€ä¸ªå¯ä»¥äº§ç”Ÿéšæœºæ•°çš„ [rand crate](https://crates.io/crates/rand)ã€‚å¯ä»¥çœ‹åˆ°ç›®å‰ `rand` çš„ç‰ˆæœ¬å·²ç»æ›´æ–°åˆ° `0.8.5`ã€‚


![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/9d2c0b71db3c7c678667d164c514e411.png#pic_center)

`[æ³¨]ï¼šè¯¥å‡½æ•°ä¼šä¸æ–­æ›´æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥ç‚¹å‡»æŸ¥çœ‹å½“å‰çš„æœ€æ–°ç‰ˆï¼Œæ¨èä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„å‡½æ•°ã€‚`

## 5.1. ä½¿ç”¨ crate å°†å¯ä½¿ç”¨æ›´å¤šå‡½æ•°
ä¸€ä¸ª `crate` æ˜¯ `Rust` æºæ–‡ä»¶çš„é›†åˆã€‚æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„è¿™ä¸ªå°æ¸¸æˆé¡¹ç›®ä¹Ÿå°†ä¼šç”Ÿæˆä¸€ä¸ªäºŒè¿›åˆ¶ `crate`ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚`Rust` ä¸­ï¼Œ`crate` æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¯ç¼–è¯‘å•å…ƒã€‚å…·ä½“è¯´æ¥ï¼Œå°±æ˜¯ä¸€ä¸ªæˆ–ä¸€æ‰¹æ–‡ä»¶ï¼ˆå¦‚æœæ˜¯ä¸€æ‰¹æ–‡ä»¶ï¼Œé‚£ä¹ˆæœ‰ä¸€ä¸ªæ–‡ä»¶æ˜¯è¿™ä¸ª `crate` çš„å…¥å£ï¼‰ã€‚å®ƒç¼–è¯‘åï¼Œä¼šå¯¹åº”ç€ç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æˆ–ä¸€ä¸ªåº“ã€‚

`[æ³¨]: crate æ˜¯ç”¨äºåŒ…å«åœ¨å…¶ä»–ç¨‹åºä¸­çš„ä»£ç ï¼Œå¹¶ä¸èƒ½å•ç‹¬æ‰§è¡Œã€‚`

å½“æˆ‘ä»¬çš„ç¨‹åºä½¿ç”¨ `rand` ä¹‹å‰ï¼Œåº”è¯¥å…ˆä¿®æ”¹ `Cargo.toml` æ–‡ä»¶ï¼Œå°† `rand crate` ä½œä¸ºä¾èµ–é¡¹åŒ…å«è¿›å»ã€‚æ‰“å¼€ `Cargo.toml` æ–‡ä»¶ï¼Œå¹¶åœ¨ `[dependencies]` ä¸‹æ·»åŠ å³å¯ã€‚æ³¨æ„ç‰ˆæœ¬å·ï¼Œå°½é‡ä½¿ç”¨æœ€æ–°ç‰ˆã€‚

```bash
# File: Cargo.toml
[dependencies]
rand = "0.8.5"
```

åœ¨ `Cargo.toml` ä¸­çš„ `[dependencies]` ä¼šå‘Šè¯‰ä½ çš„ `Cargo` é¡¹ç›®ä¾èµ–äºå“ªäº›å¤–éƒ¨ `crates` ä»¥åŠéœ€è¦è¿™äº› `crates` çš„å“ªäº›ç‰ˆæœ¬ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ `rand` è¯­ä¹‰ç‰ˆæœ¬è¯´æ˜ç¬¦æ¥æŒ‡å®š `crate 0.8.5`ã€‚`Cargo` é€šè¿‡[è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶](https://semver.org/lang/zh-CN/)å»è¯†åˆ«ï¼ˆä¹Ÿç§°ä½œ `SemVer`ï¼‰ï¼Œè¿™æ˜¯ç¼–å†™ç‰ˆæœ¬å·çš„æ ‡å‡†ã€‚è¯¥æ•°å­— `0.8.5` å®é™…ä¸Šæ˜¯ `^0.8.5` çš„ç®€å†™ï¼Œè¿™æ„å‘³ç€ç‰ˆæœ¬è‡³å°‘æ˜¯ `0.8.5` ä½†ä½äº `0.9.0` çš„ä»»ä½•ç‰ˆæœ¬ã€‚`Cargo` è®¤ä¸ºè¿™äº›ç‰ˆæœ¬å…·æœ‰ä¸ `0.8.5` ç‰ˆæœ¬å…¼å®¹çš„å…¬å…± `API`ï¼Œæ­¤è§„èŒƒå°†ç¡®ä¿ä½¿ç”¨æœ€æ–°çš„è¡¥ä¸ç‰ˆæœ¬ä¸è¢«ä¾èµ–çš„ä»£ç ä¸€èµ·ç¼–è¯‘ã€‚ä½†ä¸ä¿è¯å…¶å®ƒç‰ˆæœ¬åƒ `0.9.0` æˆ–æ›´é«˜ç‰ˆæœ¬éƒ½å…·æœ‰ä¸æœ¬æ–‡ä»£ç ä½¿ç”¨çš„ç›¸åŒçš„ `API`ã€‚

ç°åœ¨æˆ‘ä»¬ä»¥åŠå°† `rand crate` åŒ…å«è¿›å»ï¼Œç°åœ¨ä¸è¦å¯¹ `main.rs` åšä»»ä½•ä¿®æ”¹ï¼Œç›´æ¥æ„å»ºæœ¬é¡¹ç›®æŸ¥çœ‹ä¸€ä¸‹æœ‰ä»€ä¹ˆä¸åŒã€‚

```shell
imaginemiracle:guessing_game$ cargo build
    Updating crates.io index
  Downloaded rand_chacha v0.3.1
  Downloaded rand_core v0.6.3æ„å»º
  Downloaded ppv-lite86 v0.2.16
  Downloaded getrandom v0.2.6
  Downloaded rand v0.8.5
  Downloaded cfg-if v1.0.0
  Downloaded libc v0.2.126
  Downloaded 7 crates (773.0 KB) in 1.22s
   Compiling libc v0.2.126
   Compiling cfg-if v1.0.0
   Compiling ppv-lite86 v0.2.16
   Compiling getrandom v0.2.6
   Compiling rand_core v0.6.3
   Compiling rand_chacha v0.3.1
   Compiling rand v0.8.5
   Compiling guessing_game v0.1.0 (/home/imaginemiracle/Miracle/Code/rust_projects/guessing_game)
    Finished dev [unoptimized + debuginfo] target(s) in 1m 04s
```
`[æ³¨]: å¦‚æœè¿™é‡Œæç¤º â€error: failed to get â€™randâ€˜â€œï¼Œå°è¯•å°† â€™randâ€˜ ç‰ˆæœ¬ä¿®æ”¹ä¸º 0.8.4 å†åšæ„å»ºï¼Œæˆ–è€…æ›´æ¢å…¶å®ƒç‰ˆæœ¬å†å°è¯•ã€‚`

è¿™é‡Œå„ä½çš„è¾“å‡ºå¯èƒ½å„æœ‰ä¸åŒï¼ˆç‰ˆæœ¬å·ä¸åŒï¼Œä½†éƒ½ä¼šä¸ä»£ç å…¼å®¹ï¼‰ï¼Œè¾“å‡ºçš„é¡ºåºä¹Ÿå¯èƒ½ä¸åŒï¼ˆå–å†³ä¸æ“ä½œç³»ç»Ÿï¼‰ã€‚ä½†æ˜¯åªè¦çœ‹åˆ°èƒ½ä¸‹è½½æˆåŠŸå¹¶å®Œæˆï¼ˆæç¤º `Finished`ï¼‰ï¼Œåˆ™è¯´æ˜ä¾èµ–æ„å»ºæˆåŠŸï¼Œåœ¨ç¨‹åºä¸­å°†å¯ä»¥ç›´æ¥ä½¿ç”¨åŒ…å«è¿›å»çš„ `crate` ä¸­æä¾›çš„æ–¹æ³•ã€‚

å½“æˆ‘ä»¬åŒ…å«ä¸€ä¸ªå¤–éƒ¨ä¾èµ–é¡¹æ—¶ï¼Œ`Cargo` ä¼šä»æ³¨å†Œè¡¨ä¸­è·å–ä¾èµ–é¡¹æ‰€éœ€çš„æ‰€æœ‰å†…å®¹çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¯¥æ³¨å†Œè¡¨æ˜¯æ¥è‡ª [Crates.io](https://crates.io/) çš„æ•°æ®å‰¯æœ¬ã€‚`Crates.io` æ˜¯ `Rust` ç”Ÿæ€ç³»ç»Ÿä¸­çš„äººä»¬å‘å¸ƒä»–ä»¬çš„å¼€æº `Rust` é¡¹ç›®å¹¶ä¾›å…¶ä»–äººä½¿ç”¨çš„åœ°æ–¹ã€‚

æ›´æ–°æ³¨å†Œè¡¨åï¼Œ`Cargo` ä¼šæ£€æŸ¥è¯¥ `[dependencies]` éƒ¨åˆ†å¹¶ä¸‹è½½åˆ—å‡ºçš„æ‰€æœ‰å°šæœªä¸‹è½½çš„ `crate`ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè™½ç„¶æˆ‘ä»¬åªåˆ—å‡º `rand` äº†ä¸€ä¸ªä¾èµ–é¡¹ï¼Œä½† `Cargo` è¿˜æŠ“å–äº†å…¶ä»– `rand` ä¾èµ–äºå·¥ä½œçš„ `crate`ã€‚ä¸‹è½½ `crates` åï¼Œ`Rust` ç¼–è¯‘å®ƒä»¬ï¼Œç„¶åä½¿ç”¨å¯ç”¨çš„ä¾èµ–é¡¹ç¼–è¯‘é¡¹ç›®ã€‚

å¦‚æœç«‹å³å†æ¬¡è¿è¡Œ `cargo build` è€Œä¸è¿›è¡Œä»»ä½•æ›´æ”¹ï¼Œåˆ™é™¤äº†è¯¥ `Finished` è¡Œä¹‹å¤–ï¼Œå°†ä¸ä¼šå¾—åˆ°ä»»ä½•è¾“å‡ºã€‚`Cargo` çŸ¥é“å®ƒå·²ç»ä¸‹è½½å¹¶ç¼–è¯‘äº†ä¾èµ–é¡¹ï¼Œå¹¶ä¸” `Cargo.toml` æ–‡ä»¶è¢«ä¿®æ”¹ã€‚`Cargo` ä¹ŸçŸ¥é“ `src` ç›®å½•ä¸‹çš„æºæ–‡ä»¶æ²¡æœ‰ä¿®æ”¹ï¼Œæ‰€ä»¥å®ƒä¹Ÿä¸ä¼šé‡æ–°ç¼–è¯‘ã€‚æ— äº‹å¯åšï¼Œå®ƒåªæ˜¯é€€å‡ºã€‚å¦‚æœåªæ˜¯ä¿®æ”¹äº†æºæ–‡ä»¶ï¼Œåˆ™åªä¼šç¼–è¯‘æºæ–‡ä»¶ä¸­ç›¸å…³ä»£ç ï¼Œä¸ä¼šå†é‡å¤ä¸‹è½½å’Œç¼–è¯‘ `crate`ã€‚


```shell
$ cargo update
    Updating crates.io index
    Updating rand v0.8.5 -> v0.8.6
```

`Cargo` å¿½ç•¥äº† `0.9.0` ç‰ˆæœ¬ã€‚è¿™æ—¶ï¼Œä½ ä¹Ÿä¼šæ³¨æ„åˆ°çš„ `Cargo.lock` æ–‡ä»¶ä¸­çš„å˜åŒ–æ— å¤–ä¹ç°åœ¨ä½¿ç”¨çš„ `rand crate` ç‰ˆæœ¬æ˜¯ `0.8.6` ã€‚å¦‚æœæƒ³è¦ä½¿ç”¨ `0.9.0` ç‰ˆæœ¬çš„ `rand` æˆ–æ˜¯ä»»ä½• `0.9.x` ç³»åˆ—çš„ç‰ˆæœ¬ï¼Œå¿…é¡»åƒè¿™æ ·æ›´æ–° `Cargo.toml` æ–‡ä»¶ï¼š

```rust
[dependencies]
rand = "0.9.0"
```

ä¸‹ä¸€æ¬¡è¿è¡Œ `cargo build` æ—¶ï¼Œ`Cargo` ä¼šæ›´æ–°å¯ç”¨ `crate` çš„ `registry`ï¼Œå¹¶æ ¹æ®ä½ æŒ‡å®šçš„æ–°ç‰ˆæœ¬é‡æ–°è¯„ä¼° `rand` çš„è¦æ±‚ã€‚

## 5.2. ç”Ÿæˆéšæœºæ•°
æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¼šä½¿ç”¨åˆ°åˆšè¢«æ·»åŠ è¿›ä¾èµ–é¡¹çš„ `crate` ä¸­æä¾›çš„ `rand` å‡½æ•°ã€‚è®©æˆ‘ä»¬æ›´æ–°ä¸€ä¸‹ `src/main.rs`ã€‚
```rust
use std::io;
use rand::Rng;

fn main() {
    println!("Guess the number!");

    let secret_number = rand::thread_rng().gen_range(1..101);

    println!("The secret number is: {}.", secret_number);

    println!("Please input your guess.");

    let mut guess = String::new();

    io::stdin()
        .read_line(&mut guess)
        .expect("Failed to read line.");

    println!("You guessed: {}", guess);
}
```

`[æ³¨]ï¼šå¦‚æœä½¿ç”¨çš„æ˜¯ 0.9.0 åŠå…¶ä»¥ä¸Šç‰ˆæœ¬çš„ rand crateï¼Œé‚£ä¹ˆè¿™é‡Œçš„ thread_rng åº”è¯¥éœ€è¦æ”¹å†™ä¸º rngï¼Œ gen_range æ”¹å†™ä¸º random_rangeï¼Œå¦‚ä¸Šä¸¤ä¸ªå‡½æ•°åå·²åœ¨æ–°ç‰ˆæœ¬ä¸­å¼ƒç”¨ã€‚`

## 5.3. ä»£ç è¯´æ˜â€”â€”02
### 5.3.1. å¼•å…¥ trait rand::Rng
é¦–å…ˆï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€è¡Œ `use rand::Rng`ã€‚è¯¥ `Rng` ç‰¹å¾ (`trait`) å®šä¹‰äº†éšæœºæ•°ç”Ÿæˆå™¨å®ç°çš„æ–¹æ³•ï¼Œå¹¶ä¸”è¯¥ç‰¹å¾å¿…é¡»è¢«å¼•å…¥åœ¨æˆ‘ä»¬ä½¿ç”¨è¿™äº›å‡½æ•°çš„èŒƒå›´å†…ã€‚è¿™é‡Œå¯¹äº `trait` ä¸åšè¿‡å¤šçš„è®¨è®ºï¼Œåé¢å†æ·±å…¥å­¦ä¹ ã€‚
### 5.3.2. å®šä¹‰å˜é‡å¹¶äº§ç”Ÿéšæœºæ•°
é¦–å…ˆå®šä¹‰çœ‹ä¸€ä¸ªåä¸º `secert_number` çš„ä¸å¯å˜å˜é‡ï¼Œå¹¶ä¸”ç»‘å®šäº†ä¸€ä¸ªéšæœºæ•°ç»™å®ƒã€‚è¿™é‡Œè°ƒç”¨äº† `rand::thread_rng` æ¥æä¾›å°†è¦ä½¿ç”¨çš„ç‰¹å®šéšæœºæ•°ç”Ÿæˆå™¨çš„å‡½æ•°ï¼šä¸€ä¸ªä½äºå½“å‰æ‰§è¡Œçº¿ç¨‹çš„æœ¬åœ°å¹¶ç”±æ“ä½œç³»ç»Ÿç¡®å®š**ç§å­**çš„å‡½æ•°ã€‚ç„¶åå†è°ƒç”¨ `gen_range` éšæœºæ•°ç”Ÿæˆå™¨ä¸Šçš„æ–¹æ³•ã€‚è¯¥å‡½æ•°ç”±æˆ‘ä»¬é€šè¿‡ `use` è¯­å¥å¼•å…¥èŒƒå›´çš„ `Rng` ç‰¹å¾å®šä¹‰ã€‚`use rand::Rng` è¯¥ `gen_range` æ–¹æ³•å°†èŒƒå›´è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ï¼Œå¹¶åœ¨è¯¥èŒƒå›´å†…ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ã€‚åœ¨è¿™é‡Œä½¿ç”¨çš„èŒƒå›´è¡¨è¾¾å¼çš„å½¢å¼ `start..end` æ˜¯**åŒ…å«ä¸‹é™ä½†ä¸åŒ…å«ä¸Šé™**ï¼Œå› æ­¤éœ€è¦æŒ‡å®šä¸º `1..101`ï¼Œè¡¨ç¤ºè¯·æ±‚ä¸€ä¸ªä»‹äº `1` å’Œ `100` ä¹‹é—´çš„æ•°å­—ã€‚æˆ–è€…ï¼Œå¯ä»¥ä¼ é€’èŒƒå›´ `1..=100`ï¼Œè¿™æ˜¯ç­‰ä»·çš„ã€‚

`(ç§å­: æ˜¯å…³äºéšæœºæ•°å–å€¼çš„ä¸€ä¸ªå…³é”®æ•°å€¼ã€‚ç”±äºéšæœºæ•°çš„ä¹Ÿæ˜¯æ ¹æ®å›ºå®šç®—æ³•æ¥äº§ç”Ÿçš„ï¼Œè™½ç„¶åœ¨ä¸€æ¬¡æ‰§è¡Œï¼Œç¡®å®ä¼šå‘ç°æ•°æ®äº§ç”Ÿæ˜¯éšæœºçš„ï¼Œä½†å†æ¬¡æ‰§è¡Œç¨‹åºä¼šå‘ç°ä¸¤æ¬¡äº§ç”Ÿçš„æ•°æ®åºåˆ—ç›¸åŒã€‚è¿™æ˜¯å› ä¸ºéšæœºæ•°å‡½æ•°çš„ç§å­å€¼ç›¸åŒå¯¼è‡´ï¼Œå› æ­¤ä¸ºäº†å®ç°çœŸæ­£çš„éšæœºï¼Œéœ€è¦é€šè¿‡â€™ç§å­â€˜æ¥æ”¹å˜ã€‚ä¸€èˆ¬é»˜è®¤æƒ…å†µæ˜¯ä½¿ç”¨å½“å‰ç³»ç»Ÿæ—¶é—´ä½œä¸ºç§å­ï¼Œç”±äºæ¯ä¸€æ—¶åˆ»çš„æ—¶é—´å€¼éƒ½ä¸åŒï¼Œä¹Ÿå°±å®ç°äº†çœŸæ­£æ„ä¹‰ä¸Šçš„éšæœº)ã€‚`

>æ³¨æ„: ä½ ä¹Ÿè®¸ä¸æ¸…æ¥šè¦ä½¿ç”¨å“ªäº›ç‰¹å¾ä»¥åŠä» crate è°ƒç”¨å“ªäº›æ–¹æ³•å’Œå‡½æ•°ï¼Œå› æ­¤æ¯ä¸ª crate éƒ½æœ‰åŒ…å«ä½¿ç”¨è¯´æ˜çš„æ–‡æ¡£ã€‚Cargo çš„å¦ä¸€ä¸ªå·§å¦™åŠŸèƒ½æ˜¯è¿è¡Œè¯¥ cargo doc --open å‘½ä»¤å°†åœ¨æœ¬åœ°æ„å»ºæ‰€æœ‰ä¾èµ–é¡¹æä¾›çš„æ–‡æ¡£å¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å®ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¯¹ rand crate ä¸­çš„å…¶ä»–åŠŸèƒ½æ„Ÿå…´è¶£ï¼Œè¯·è¿è¡Œcargo doc --openå¹¶å•å‡»randå·¦ä¾§è¾¹æ ä¸­çš„ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/4dbe4fab95bcdbbec95a69e3e8aa01fe.png#pic_center)

# 6. æµ‹è¯•éšæœºæ•°åŠŸèƒ½
å¯ä»¥çœ‹åˆ°åœ¨æºæ–‡ä»¶ä¸­è¿˜æ·»åŠ äº†ä¸€è¡Œ `println!`å®ï¼Œå°†äº§ç”Ÿçš„éšæœºæ•°æ‰“å°äº†å‡ºæ¥ï¼Œè¿™åªæ˜¯ä½œä¸ºè°ƒè¯•æ¥ç”¨ã€‚åœ¨çœŸæ­£çš„æ¸¸æˆä¸­ï¼Œä¸ä¼šè®©ç©å®¶æå‰çŸ¥é“ç­”æ¡ˆçš„å§ï¼Let's run it.
å¯ä»¥å¤šè¿è¡Œå‡ æ¬¡ï¼ŒæŸ¥çœ‹æ¯æ¬¡äº§ç”Ÿçš„æ•°å€¼æ˜¯å¦æ˜¯éšæœºçš„ã€‚
```shell
imaginemiracle:guessing_game$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 35.
Please input your guess.
12
You guessed: 12

imaginemiracle:guessing_game$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 54.
Please input your guess.
12
You guessed: 12

imaginemiracle:guessing_game$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 17.
Please input your guess.
12
You guessed: 12
```
å·²ç»å®Œæˆçš„åŠŸèƒ½ï¼š
**(1)** äº§ç”Ÿéšæœºæ•°ï¼Œå¹¶æ‰“å°å‡ºæ¥;

**(2)** è®©ç©å®¶è¾“å…¥æ•°å­—;

**(3)** è·å–è¾“å…¥çš„æ•°å­—ï¼Œå¹¶æ‰“å°å‡ºæ¥ã€‚

# 7. ç¼–å†™ç¬¬ä¸‰éƒ¨åˆ†åŠŸèƒ½â€”â€”æ¯”è¾ƒæ•°å€¼
åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»è·å¾—äº†ç©å®¶çš„è¾“å…¥ï¼Œä»¥åŠéšæœºäº§ç”Ÿçš„ç§˜å¯†æ•°å­—ã€‚

**Girl:** é‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ç›´æ¥æ¯”è¾ƒäº†å‘¢ï¼Ÿ

**Boy:** ä¸ºä»€ä¹ˆè¿™æ ·é—®ï¼Ÿéš¾é“ä¸æ˜¯å—ï¼Ÿ

**Girl:** å…ˆè¯•è¯•çœ‹å§ã€‚

**Boy:** ???

```rust
use std::io;            // å¼•å…¥æ ‡å‡†åº“çš„è¾“å…¥è¾“å‡º
use rand::Rng;          // å¼•å…¥å®šä¹‰äº†éšæœºæ•°ç”Ÿæˆå‡½æ•°çš„trait
use std::cmp::Ordering; //å¼•å…¥ç”¨äºæ•°å€¼æ¯”è¾ƒçš„å‡½æ•°

fn main() {
    println!("Guess the number!");

    let secret_number = rand::thread_rng().gen_range(1..101);

    println!("The secret number is: {}.", secret_number);

    println!("Please input your guess.");

    let mut guess = String::new();

    io::stdin()
        .read_line(&mut guess)
        .expect("Failed to read line.");

    println!("You guessed: {}", guess);

    match guess.cmp(&secret_number) {
        Ordering::Less => println!("Too small!"),
        Ordering::Greater => println!("Too big!"),
        Ordering::Equal => println!("Yeah! You win!"),
    }
}
```

`[æ³¨]ï¼šè¯¥æ®µä»£ç æ— æ³•ç¼–è¯‘é€šè¿‡ï¼Œè‡³äºåŸå› è§ä¸‹æ–‡ã€‚`

## 7.1. ä»£ç è¯´æ˜â€”â€”03
### 7.1.1. å¼•å…¥ std::cmp::Ordering
é¦–å…ˆï¼Œæˆ‘ä»¬æ·»åŠ å¦ä¸€ä¸ª `use` è¯­å¥ï¼Œå°†æ ‡å‡†åº“ä¸­è°ƒç”¨çš„ç±»å‹ `std::cmp::Ordering` å¼•å…¥æˆ‘ä»¬çš„ä»£ç èŒƒå›´ã€‚è¯¥ `Ordering` ç±»å‹ä¹Ÿæ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå…·æœ‰å˜ä½“ `Less`ã€`Greater` å’Œ `Equal`ï¼ˆå‰è€…å°äºåè€…ã€å‰è€…å¤§äºåè€…ã€å‰è€…ç­‰äºåè€…ï¼‰ã€‚è¿™æ˜¯æ¯”è¾ƒä¸¤ä¸ªå€¼æ—¶å¯èƒ½å‡ºç°çš„ä¸‰ç§ç»“æœã€‚

ç„¶åæˆ‘ä»¬åœ¨ä¸‹é¢æ·»åŠ äº†å‡ è¡Œï¼Œç”¨äºæè¿°é‡åˆ°è¯¥ `Ordering` çš„å‡ ç§æƒ…å†µéœ€è¦åšçš„äº‹æƒ…ã€‚`cmp` å‡½æ•°å¯ä»¥æ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä»»ä½•å¯ä»¥æ¯”è¾ƒçš„ä¸œè¥¿ä¸Šè°ƒç”¨ã€‚å®ƒæ¯”è¾ƒä½ æƒ³è¦æ¯”è¾ƒçš„ä»»ä½•å†…å®¹ï¼šè¿™é‡Œä¸º `guess` ä¸ `secret_number` è¿›è¡Œæ¯”è¾ƒã€‚ç„¶åä¼šè¿”å› `Ordering` çš„å˜ä½“ï¼Œåœ¨è¯¥è¡Œçš„å‰é¢æœ‰ä¸ªå…³é”®å­— `match` è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª `match` è¡¨è¾¾å¼ï¼Œå…¶æ ¼å¼ä¸ºï¼š
```rust
match number_01 {
	case_01 => to do,
	case_02 => to do,
	......
}
```
`match` è¡¨è¾¾å¼ä¼šåŒ¹é…å…¶å `{}` ä¸­çš„å€¼ï¼Œè‹¥åŒ¹é…æˆåŠŸåˆ™æ‰§è¡Œæ‰€æŒ‡å‘çš„è¯­å¥ã€‚æœ‰å…³å…¶è¯¦ç»†çš„ä½¿ç”¨å°†ä¼šåœ¨åé¢æ–‡ç« æ±‡æ€»è¿›è¡Œå­¦ä¹ ã€‚

è¿™é‡Œ `match` é€šè¿‡åŒ¹é…è¿”å›çš„ `Ordering` çš„æšä¸¾å˜ä½“ï¼Œæ¥å†³å®šä¸¤è€…æ•°å€¼çš„å…³ç³»ï¼Œä»¥åŠä¹‹åè¯¥è¾“å‡ºä»€ä¹ˆã€‚

**Boy:** è¿™åº”è¯¥ç®—å†™å¥½äº†å§ï¼

**Girl:** ~ï¼Œç¼–è¯‘ä¸€ä¸‹çœ‹çœ‹å§ã€‚
```shell
imaginemiracle:guessing_game$ cargo build
   Compiling guessing_game v0.1.0 (/home/imaginemiracle/Miracle/Code/rust_projects/guessing_game)
error[E0308]: mismatched types
  --> src/main.rs:22:21
   |
22 |     match guess.cmp(&secret_number) {
   |                     ^^^^^^^^^^^^^^ expected struct `String`, found integer
   |
   = note: expected reference `&String`
              found reference `&{integer}`

error[E0283]: type annotations needed for `{integer}`
   --> src/main.rs:8:44
    |
8   |     let secret_number = rand::thread_rng().gen_range(1..101);
    |         -------------                      ^^^^^^^^^ cannot infer type for type `{integer}`
    |         |
    |         consider giving `secret_number` a type
    |
    = note: multiple `impl`s satisfying `{integer}: SampleUniform` found in the `rand` crate:
            - impl SampleUniform for i128;
            - impl SampleUniform for i16;
            - impl SampleUniform for i32;
            - impl SampleUniform for i64;
            and 8 more
note: required by a bound in `gen_range`
   --> /home/imaginemiracle/.cargo/registry/src/github.com-1ecc6299db9ec823/rand-0.8.5/src/rng.rs:131:12
    |
131 |         T: SampleUniform,
    |            ^^^^^^^^^^^^^ required by this bound in `gen_range`
help: consider specifying the type arguments in the function call
    |
8   |     let secret_number = rand::thread_rng().gen_range::<T, R>(1..101);
    |                                                     ++++++++

Some errors have detailed explanations: E0283, E0308.
For more information about an error, try `rustc --explain E0283`.
error: could not compile `guessing_game` due to 2 previous errors
```
**Boy:** Wo  Wo~ï¼Œã“ã‚Œã¯ä½•ã§ã™ã‹ï¼ï¼

**Girl:** Ah Oh!! We get some error.

### 7.1.2. Rust é‡Œçš„æ•´å‹â€”â€”integer
æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸Šé¢çš„é”™è¯¯ï¼Œé¦–å…ˆçœ‹ç¬¬ä¸€ä¸ªé”™è¯¯ï¼Œå‘ç”Ÿåœ¨ç¬¬ `22` è¡Œï¼Œæç¤ºæˆ‘ä»¬ â€œç±»å‹ä¸åŒ¹é…â€ã€‚å¥¥ï¼åŸæ¥ `guess`  æ˜¯ä¸€ä¸ª `integer` è€Œ `secret_number` æ˜¯ä¸ª `String`ï¼Œ`Rust` æç¤ºè¿™ä¸¤ä¸ªæ— æ³•æ¯”è¾ƒï¼Œå› æ­¤éœ€è¦åœ¨ `guess` å’Œ `secret_number` è¿™ä¸¤ä¸ªå˜é‡çš„ç±»å‹ä¸€è‡´çš„æƒ…å†µä¸‹æ‰å¯ä»¥è¿›è¡Œæ¯”è¾ƒã€‚

`Rust` æœ‰ä¸€ä¸ªå¼ºå¤§çš„é™æ€ç±»å‹ç³»ç»Ÿã€‚ä½†æ˜¯ï¼Œå®ƒä¹Ÿæœ‰ç±»å‹æ¨æ–­ã€‚å½“æˆ‘ä»¬ç¼–å†™è¿™æ¡è¯­å¥ `let mut guess = String::new()`ï¼Œ`Rust` èƒ½å¤Ÿæ¨æ–­å‡º `guess` åº”è¯¥æ˜¯ä¸€ä¸ª `String` ç±»å‹ï¼Œå¹¶ä¸”æ²¡æœ‰æç¤ºè®©æˆ‘ä»¬æ·»åŠ ç±»å‹å£°æ˜ã€‚è€Œ `secret_number`ï¼Œ æ˜¯æ•´æ•°ç±»å‹ã€‚`Rust` çš„ä¸€äº›æ•´æ•°ç±»å‹çš„å€¼å¯ä»¥åœ¨ `1` åˆ° `100` ä¹‹é—´ï¼š
* `i32` æ˜¯ä¸€ä¸ª `32` ä½æœ‰ç¬¦å·æ•´æ•°ï¼›
* `u32`ï¼Œè¡¨ç¤ºä¸€ä¸ªæ— ç¬¦å·çš„ `32` ä½æ•´æ•°ï¼›
*  `i64`ï¼Œ è¡¨ç¤ºä¸€ä¸ª `64` ä½æœ‰ç¬¦å·æ•´æ•°ï¼›
* `u64`ï¼Œè¡¨ç¤ºä¸€ä¸ª `64` æ— ç¬¦å·æ•´æ•°ã€‚

é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™ `Rust` é»˜è®¤çš„çš„æ•´æ•°ç±»å‹ä¸º `i32`ï¼Œ**è€Œè¿™é‡Œçš„ `secret_number` å¹¶æœªæ·»åŠ ç±»å‹è¯´æ˜ï¼Œå› æ­¤ `Rust` æ¨æ–­å‡ºå¥¹æ˜¯ä¸€ä¸ªæ•´æ•°ç±»å‹ `i32`**ã€‚æ‰€ä»¥é”™è¯¯çš„åŸå› æ˜¯ `Rust` æ— æ³•æ¯”è¾ƒå­—ç¬¦ä¸²å’Œæ•°å­—ç±»å‹ã€‚

### 7.1.3. ç±»å‹è½¬æ¢â€”â€”String to integer
é‚£ä¹ˆæˆ‘ä»¬è¦åšçš„æ˜¯ï¼Œç»Ÿä¸€è¿™ä¸¤ä¸ªå˜é‡çš„ç±»å‹ï¼Œå³åªéœ€è¦å°† `String` ç±»å‹çš„ `guess` è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ã€‚æ¥çœ‹çœ‹æ€ä¹ˆåšï¼š
```rust
	// ------snip------ (æš‚æ—¶è£æ‰ä¸ŠåŠéƒ¨åˆ†)

    let mut guess = String::new();

    io::stdin()
        .read_line(&mut guess)
        .expect("Failed to read line.");

    let guess: u32 = guess.trim().parse().expect("Please type a number!");

    println!("You guessed: {}", guess);

    match guess.cmp(&secret_number) {
        Ordering::Less => println!("Too small!"),
        Ordering::Greater => println!("Too big!"),
        Ordering::Equal => println!("Yeah! You win!"),
    }
}
```
å…³é”®ä»£ç ï¼š
```rust
    let guess: u32 = guess.trim().parse().expect("Please type a number!");
```
æˆ‘ä»¬å°†è¿™ä¸ªæ–°å®šä¹‰çš„å˜é‡ `guess` ç»‘å®šåˆ°è¡¨è¾¾å¼ `guess.trim().parse()`ã€‚è¡¨è¾¾å¼ä¸­çš„æ˜¯æŒ‡åŒ…å«è¾“å…¥ä½œä¸ºå­—ç¬¦ä¸² `guess`(åŸæ¥çš„ `guess` )ã€‚`guess` å®ä¾‹ä¸Šçš„ `trim` æ–¹æ³• `String` å°†æ¶ˆé™¤å¼€å¤´å’Œç»“å°¾çš„æ‰€æœ‰ç©ºæ ¼æˆ–å›è½¦ã€‚
`[æ³¨]: ç©ºæ ¼å’Œå›è½¦çš„ ASCII è¡¨ç¤ºç¬¦åˆ†åˆ«ä¸º '\r' '\nã€‚'`

**Boy:** ä¸ºå•¥å­è¦å»æ‰ç©ºæ ¼ï¼Œè¯´çš„åˆ°åº•å¥¹é‡Œé¢æœ‰ç©ºæ ¼å—ï¼Ÿ

**Girl:** å‘€å‘€ï¼ä»”ç»†å›æƒ³ä¸€ä¸‹åœ¨æ‰§è¡Œè¿™æ®µç¨‹åºåï¼Œåœ¨è¾“å…¥æ—¶ï¼Œæ˜¯å¦æŒ‰è¿‡å›è½¦ï¼Ÿ

**Boy:** enmmï¼Œè¿™æ˜¯å¿…é¡»åšçš„å•Šï¼Œå¦åˆ™ç¨‹åºæ— æ³•çŸ¥é“æˆ‘ä»¬æ˜¯å¦è¾“å…¥å®Œæˆã€‚è¿™ä¸ªä¹Ÿç®—ï¼ï¼Ÿ

**Girl:** Bingoï¼Œå‡å¦‚ä½ è¾“å…¥çš„æ˜¯ `28`ï¼Œåœ¨ä¹‹åæŒ‰å®Œå›è½¦åã€‚äº‹å®ä¸Š `read_line` ä¼šå°†æ¢è¡Œç¬¦ä¹Ÿçº³å…¥å…¶ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ `read_line` çœ‹åˆ°çš„å­—ç¬¦ä¸²æ˜¯è¿™æ ·çš„ `28\n`ï¼Œå› æ­¤å¾—å»æ‰è¿™ä¸ªå°å°¾å·´ï¼Œæˆ‘ä»¬å¿…é¡»è¿™æ ·åšï¼Œæ‰èƒ½å¾—åˆ°åªåŒ…å«äº†æ•°å­—çš„å­—ç¬¦ä¸²ï¼Œåœ¨ä¹‹åçš„è½¬æ¢æ•°å­—å’Œæ¯”è¾ƒæ—¶æ‰ä¸ä¼šå‡ºç°é—®é¢˜ã€‚

**Boy:** å•Šï¼Œè¿™æ ·å­å“¦ï¼Œé‚£è¿™ä¸€æ¬¡å°±å¬ä½ çš„å§ï¼

å­—ç¬¦ä¸²ä¸Šçš„ `parse` å‡½æ•°ä¼šå°†å­—ç¬¦ä¸²è§£æä¸ºæŸç§æ•°å­—ç±»å‹ã€‚å› ä¸ºè¿™ä¸ªå‡½æ•°å¯ä»¥è§£æå¤šç§æ•°å­—ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—æ ¹æ®éœ€è¦æ¥å‘Šè¯‰ `Rust` æˆ‘ä»¬æƒ³è¦çš„ç¡®åˆ‡æ•°å­—ç±»å‹ `let guess: u32`ã€‚åé¢çš„å†’å· (` :`)ï¼Œå‘Šè¯‰ `Rust` æˆ‘ä»¬éœ€è¦å°† `guess` å˜é‡çš„ç±»å‹å®šä¹‰ä¸ºæŒ‡å®šçš„ç±»å‹ `u32` ã€‚æ‰€ä»¥ç°åœ¨æ¯”è¾ƒå°†åœ¨ç›¸åŒç±»å‹çš„ä¸¤ä¸ªå€¼ä¹‹é—´è¿›è¡Œï¼

**Boy:** ã¡ã‚‡ã£ã¨å¾…ã£ã¦ã€ã“ã‚Œã¯å¤§ä¸ˆå¤«ã‹ï¼Ÿ

**Girl:** ã©ã†ã—ãŸã®ï¼Ÿ

**Boy:** ã ã£ã¦ã€ã©ã¡ã‚‰ã‚‚ã€Œguessã€ã¨ã„ã†åå‰ã§ã™ã€‚

Good questionã€‚ç¢ºï¼ˆãŸã—ï¼‰ã‹ã«ï¼ˆç¡®å®å¦‚æ­¤ï¼‰ï¼Œçœ‹èµ·æ¥æˆ‘ä»¬æ˜¯å®šä¹‰äº†ä¸¤ä¸ªç›¸åŒåçš„å˜é‡ï¼Œä½†è¿™åœ¨ `Rust` ä¸­æ˜¯è¢«å…è®¸çš„ã€‚`Rust` å…è®¸ç”¨ä¸€ä¸ªæ–°çš„å€¼æ¥è¦†ç›–ä¹‹å‰çš„å€¼ã€‚åœ¨ `Rust` æˆ‘ä»¬å¯ä»¥é‡å¤ä½¿ç”¨å˜é‡åï¼Œç”¨æ–°çš„å˜é‡å°†æ—§çš„è¦†ç›–ï¼Œä¾ç„¶æ˜¯ä¹‹å­˜åœ¨äº†ä¸€ä¸ªåä¸º `guess` çš„å˜é‡ã€‚`Rust` ä¸ä¼šå¼ºè¿«æˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªå”¯ä¸€çš„å˜é‡ã€‚åé¢çš„æ–‡ç« é‡Œå°†è¯¦ç»†å¯¹æ­¤è¿›è¡Œä»‹ç»ï¼Œç°åœ¨åªéœ€è¦çŸ¥é“ï¼Œä¸€èˆ¬å½“å¸Œæœ›å°†å˜é‡ä»ä¸€ç§ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨æ­¤åŠŸèƒ½ã€‚

è¯¥parseæ–¹æ³•ä»…é€‚ç”¨äºå¯ä»¥é€»è¾‘è½¬æ¢ä¸ºæ•°å­—çš„å­—ç¬¦ï¼Œå› æ­¤å¾ˆå®¹æ˜“å¯¼è‡´é”™è¯¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå­—ç¬¦ä¸²åŒ…å« `AğŸ‘%`è¿™ç±»éæ•°å­—å­—ç¬¦ï¼Œåˆ™æ— æ³•å°†å…¶è½¬æ¢ä¸ºæ•°å­—ã€‚å› ä¸ºå®ƒå°†ä¼šå‘ç”Ÿé”™è¯¯ï¼Œæ‰€ä»¥è¯¥`parse` æ–¹æ³•è¿”å›ä¸€ä¸ª `Result` ç±»å‹ï¼Œå°±åƒè¯¥ `read_line` æ–¹æ³•æ‰€åšçš„ä¸€æ ·ï¼ˆåœ¨å‰é¢çš„â€œæ•…éšœå¤„ç†â€ `Result` ä¸­è®¨è®ºè¿‡ï¼‰ã€‚æˆ‘ä»¬å°†å†æ¬¡ä½¿ç”¨è¯¥ `expect` æ–¹æ³•ä»¥åŒæ ·çš„æ–¹å¼å¤„ç† `Result`ã€‚å¦‚æœç”±äºæ— æ³•ä»å­—ç¬¦ä¸²ä¸­åˆ›å»ºæ•°å­—è€Œ `parse` è¿”å›ä¸€ä¸ª `Err` å˜ä½“ï¼Œåˆ™è¯¥è°ƒç”¨( `expect` )å°†ä½¿æ¸¸æˆå´©æºƒå¹¶æ‰“å°æˆ‘ä»¬ç»™å®ƒçš„é”™è¯¯ä¿¡æ¯ã€‚å¦‚æœå¯ä»¥æˆåŠŸåœ°å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œå®ƒå°†è¿”å›çš„å˜ä½“ `Ok`, å¹¶å°† `expect` ä»å€¼ä¸­è¿”å›æˆ‘ä»¬æƒ³è¦çš„æ•°å­—ã€‚

# 8. æµ‹è¯•æ•°å€¼æ¯”è¾ƒåŠŸèƒ½
ç°åœ¨è®©æˆ‘ä»¬è¿è¡Œä¸€ä¸‹ä¿®æ”¹åçš„ä»£ç å§ï¼
```shell
imaginemiracle:guessing_game$ cargo run
   Compiling guessing_game v0.1.0 (/home/imaginemiracle/Miracle/Code/rust_projects/guessing_game)
    Finished dev [unoptimized + debuginfo] target(s) in 0.65s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 73.
Please input your guess.
23
You guessed: 23
Too small!

imaginemiracle:guessing_game$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 66.
Please input your guess.
                80
You guessed: 80
Too big!
```
ç»†å¿ƒçš„æœ‹å‹ä¼šå‘ç°è¿™é‡Œè¿è¡Œäº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡åœ¨è¾“å…¥çš„æ—¶å€™ç›´æ¥è¾“å…¥äº†æ•°å­—å’Œå›è½¦ï¼Œè€Œåœ¨ç¬¬äºŒæ¬¡æ‰§è¡Œåï¼Œæ˜¯å…ˆè¾“å…¥äº†ä¸€äº›ç©ºæ ¼ï¼Œç„¶ååœ¨è¾“å…¥æ•°å­—å’Œå›è½¦ï¼Œç¨‹åºä»ç„¶ä¼šæ­£ç¡®çš„è·å–åˆ°æ•°å­—ã€‚å¹¶ä¸”ä¼šæç¤ºå‡ºæˆ‘ä»¬è¾“å…¥çš„æ•°å­—è¿‡å°æˆ–æ˜¯è¿‡å¤§ã€‚

å·²ç»å®Œæˆçš„åŠŸèƒ½ï¼š

**(1)** äº§ç”Ÿéšæœºæ•°ï¼Œå¹¶æ‰“å°å‡ºæ¥;

**(2)** è®©ç©å®¶è¾“å…¥æ•°å­—;

**(3)** è·å–è¾“å…¥çš„æ•°å­—ï¼Œå¹¶æ‰“å°å‡ºæ¥;

**(4)** æ¯”è¾ƒäº§ç”Ÿçš„éšæœºæ•°å’Œç©å®¶è¾“å…¥çš„æ•°å€¼ï¼Œå¹¶æ‰“å°å‡ºä¸ç§˜å¯†æ•°å­—çš„å¯¹æ¯”ç»“æœã€‚

å“‡å””ï¼æˆ‘ä»¬å·²ç»å®Œæˆäº†è¿™ä¸ªæ¸¸æˆçš„å¤§éƒ¨åˆ†åŠŸèƒ½å•¦ï¼ç¶šã‘ã¾ã—ã‚‡ã†ã€‚

# 9. ç¼–å†™ç¬¬å››éƒ¨åˆ†åŠŸèƒ½â€”â€”å¾ªç¯å¤šæ¬¡è¾“å…¥çŒœæµ‹
ç°åœ¨ç©å®¶åªèƒ½çŒœæµ‹ä¸€æ¬¡ï¼Œæ— è®ºæ˜¯å¦çŒœå¯¹éƒ½ä¼šé€€å‡ºï¼ŒçœŸæ­£çš„æ¸¸æˆåº”è¯¥ä¸ä¼šè¿™ä¹ˆæ— è¶£å§ï¼è®©æˆ‘ä»¬ä½¿ç”¨å¾ªç¯æ¥è®©ç©å®¶å¯ä»¥å¤šæ¬¡çŒœæµ‹ç›´åˆ°æ­£ç¡®æ‰é€€å‡ºæ¸¸æˆã€‚
```rust
use std::io;            // å¼•å…¥æ ‡å‡†åº“çš„è¾“å…¥è¾“å‡º
use rand::Rng;          // å¼•å…¥å®šä¹‰äº†éšæœºæ•°ç”Ÿæˆå‡½æ•°çš„trait
use std::cmp::Ordering; //å¼•å…¥ç”¨äºæ•°å€¼æ¯”è¾ƒçš„å‡½æ•°

fn main() {
    println!("Guess the number!");

    let secret_number = rand::thread_rng().gen_range(1..101);

    println!("The secret number is: {}.", secret_number);

	// åŠ å…¥å¾ªç¯
    loop{

        println!("Please input your guess.");

        let mut guess = String::new();

        io::stdin()
            .read_line(&mut guess)
            .expect("Failed to read line.");

        let guess: u32 = guess.trim().parse().expect("Please type a number!");

        println!("You guessed: {}", guess);

        match guess.cmp(&secret_number) {
            Ordering::Less => println!("Too small!"),
            Ordering::Greater => println!("Too big!"),
            Ordering::Equal => {
                println!("Yeah! You win!");
                break;
            },
        }
    } // End of loop
}
```
## 9.1. ä»£ç è¯´æ˜â€”â€”04
### 9.1.1. æ·»åŠ å¾ªç¯â€”â€”loop
`Rust` é‡Œçš„å¾ªç¯ï¼š
```rust
	loop {
		...
		...
	}
```
ä¸Šè¿°ä»£ç çš„åŠŸèƒ½ç­‰åŒäº `c/c++` ä¸­çš„ `while(1)`
```c
	while(1) {
		...
		...
	}
```
å…³é”®å­— `loop` æ ‡è¯†ç€åé¢çš„ `{}` æè¿°çš„æ˜¯ä¸€ä¸ªå¾ªç¯ä½“ï¼Œ`{}` ä¸­çš„å…·ä½“ä»£ç å°†ä¼šå¾ªç¯çš„æ‰§è¡Œã€‚
### 9.1.2. é€€å‡ºå¾ªç¯â€”â€”break
æ˜¯çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°åˆé€‚çš„ä½ç½®æ·»åŠ äº†å¾ªç¯ï¼Œå¯ä»¥è®©ç©å®¶ç©åˆ°ç—›å¿«ï¼Œå¯ï¼Œï¼Œï¼Œå¦‚ä½•å¤„ç†æ­£ç¡®ç»“æœæ—¶çš„é€€å‡ºå¾ªç¯å‘¢ï¼Ÿ
å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨ `loop` çš„å¾ªç¯ä½“é‡åˆ° `break` è¯­å¥æ—¶ï¼Œä¾¿ä¼šé€€å‡ºå¾ªç¯ï¼Œé—®é¢˜æ˜¯æˆ‘ä»¬è¯¥å†™åœ¨å“ªé‡Œå‘¢ï¼Ÿ
è¿™ä¸ªæ—¶å€™åœ¨å¾ªç¯ä½“ä¸­çš„ `match` è¡¨è¾¾å¼ä¾¿å‘æŒ¥äº†å®ƒå¦å¤–çš„ä½œç”¨ï¼Œå½“ `match` åŒ¹é…åˆ°ç›¸åº”çš„ç»“æœåï¼Œä¸ä»…åªå¯ä»¥æ‰§è¡Œä¸€æ¡è¯­å¥ï¼Œå®ƒæ˜¯å…è®¸æ‰§è¡Œå¤šæ¡è¯­å¥çš„ï¼Œåªéœ€è¦ç®€å•çš„å°†ä»–ä»¬ç”¨ `{}` æ‹¬èµ·æ¥ï¼Œå°±å˜æˆäº†ä¸€ç»„è¯­å¥ï¼Œ`match` åŒ¹é…åˆ°è¯¥é¡¹åï¼Œä¼šå°† `{}` å†…çš„è¯­å¥å…¨éƒ¨æ‰§è¡Œï¼Œå¾ˆæ–¹ä¾¿å¯¹ä¸å¯¹ã€‚
```rust
        match guess.cmp(&secret_number) {
            Ordering::Less => println!("Too small!"),
            Ordering::Greater => println!("Too big!"),
            Ordering::Equal => {
                println!("Yeah! You win!");
                break;
            },
        }
```
åƒè¿™æ ·ï¼Œå½“ç„¶åªæœ‰ä¸€æ¡è¯­å¥çš„æ—¶å€™ä¹Ÿå¯ä»¥ä½¿ç”¨ `{}` æ‹¬èµ·æ¥ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ `{}` çš„æ¯æ¡è¯­å¥éƒ½éœ€è¦è®¤çœŸçš„å†™å¥½ä»–ä»¬çš„ç»“æŸç¬¦å·å“¦ `;` ã€‚åƒä¸‡åˆ«å¿˜è®°ï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ã€‚
# 10. æµ‹è¯•å¾ªç¯&é€€å‡º
è®©æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹æ–°æ·»åŠ çš„åŠŸèƒ½å§ï¼
```shell
imaginemiracle:guessing_game$ cargo run
   Compiling guessing_game v0.1.0 (/home/imaginemiracle/Miracle/Code/rust_projects/guessing_game)
    Finished dev [unoptimized + debuginfo] target(s) in 0.24s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 13.
Please input your guess.
16
You guessed: 16
Too big!
Please input your guess.
12
You guessed: 12
Too small!
Please input your guess.
13
You guessed: 13
Yeah! You win!
```

**Boy:** å“‡å””ï¼æˆäº†ï¼

**Girl:** ç°åœ¨é«˜å…´è¿˜å¤ªæ—©å“¦ï¼

**Boy:** å˜¿å“ˆï¼è¿™æ¬¡æˆ‘çŸ¥é“ï¼Œæˆ‘ä»¬è¿˜æ²¡åˆ æ‰é‚£è¡Œæ‰“å°äº†ç§˜å¯†æ•°å­—çš„è¾“å‡ºï¼Œå¯¹ä¸å¯¹ (å¾—æ„\^-^)ã€‚

**Girl:** å¯ä¸ä»…ä»…æ˜¯è¿™æ ·å””ã€‚

**Boy:** å”ã€‚ã€‚æ•…å¼„ç„è™šï¼

**Girl:** å¯åƒä¸‡ä¸è¦ä¸ä¿¡æˆ‘å“¦ï¼è¦ä¸è¦è¯•è¯•è¾“å…¥ä¸€ä¸‹å…¶å®ƒéæ•°å­—çš„å­—ç¬¦çœ‹çœ‹ç»“æœå‘¢ï¼Ÿ

```shell
imaginemiracle:guessing_game$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 33.
Please input your guess.
op by boy  
thread 'main' panicked at 'Please type a number!: ParseIntError { kind: InvalidDigit }', src/main.rs:22:47
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
```

å“‡å“‡å“‡ï¼å‘ç”Ÿäº†ä¸å¾—äº†çš„äº‹æƒ…ï¼Œè¿™ä¹ˆç®€å•å°±è®©æˆ‘ä»¬å†™çš„ç¨‹åºå´©æºƒæ‰ï¼Œè¿™å¯è¿˜è¡Œï¼Ÿ
# 11. å¤„ç†æ— æ•ˆè¾“å…¥
è®©æˆ‘ä»¬å®Œå–„æˆ‘ä»¬çš„ä»£ç å§ï¼é¦–å…ˆæˆ‘ä»¬éœ€è¦åšçš„æ˜¯ï¼Œè®©æˆ‘ä»¬çš„ç¨‹åºå¿½ç•¥æ‰ç©å®¶çš„èƒ¡é—¹ (æ— æ•ˆè¾“å…¥)ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½ç®€å•çš„é‡åˆ°æ— æ•ˆè¾“å…¥æ—¶ç›´æ¥é€€å‡ºç¨‹åºï¼Œè€Œæ˜¯åº”è¯¥è®©è°ƒçš®çš„ä»–ä»¬é‡æ–°è¾“å…¥ã€‚
æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹è½¬æ¢ `guess` ç±»å‹è¿™è¡Œä»£ç æ¥å®ç°æˆ‘ä»¬çš„æƒ³æ³•ã€‚
```rust
		// ---snip---
		
        io::stdin()
            .read_line(&mut guess)
            .expect("Failed to read line.");

        //let guess: u32 = guess.trim().parse().expect("Please type a number!");
        let guess: u32 = match guess.trim().parse() {
            Ok(num) => num,
            Err(_) => continue,
        };

        println!("You guessed: {}", guess);
		
		// ---snip---
```
## 11.1. ä»£ç è¯´æ˜â€”â€”05
æˆ‘ä»¬ä»ä¸€ä¸ª `expect` çš„è°ƒç”¨å˜æˆä¸€ä¸ª `match` è¡¨è¾¾å¼ï¼Œä»ä¸€ä¸ªé”™è¯¯å´©æºƒè½¬ç§»åˆ°å¤„ç†é”™è¯¯ã€‚æ³¨æ„ `parse` å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª `Result` ç±»å‹çš„å®ä¾‹ï¼Œå®ƒå…·æœ‰ `Result` çš„å˜ä½“æšä¸¾ `Ok` å’Œ `Err`æˆ‘ä»¬å¯ä»¥å¥½å¥½åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå°±åƒä¹‹å‰æˆ‘ä»¬ä½¿ç”¨ `cmp` å‡½æ•°å¤„ç† `Ordering` ä¸€æ ·ã€‚

å¦‚æœ `parse` èƒ½å¤ŸæˆåŠŸåœ°å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ª `Ok`( `Result` çš„å˜ä½“ ) åŒæ—¶åŒ…å«ç»“æœè½¬æ¢åçš„å…·ä½“æ•°å€¼ã€‚æ­¤æ—¶ `match` å°†ä¼šåŒ¹é…åˆ°ç¬¬ä¸€ä¸ª `Ok` è¿™ä¾‹æƒ…å†µï¼Œå¹¶ä¸” `match` è¡¨è¾¾å¼ä¼šå°†è¿”å›çš„ `num` å€¼ä½œä¸ºå‚æ•°æ”¾è¿› `Ok` çš„å½¢å‚ (å³ `Ok` å°†ä¼šåŒ…å«è¯¥æ•°å€¼)ï¼Œè€ŒæŒ‡å‘çš„æ‰§è¡Œçš„è¯­å¥åªæœ‰ä¸€ä¸ªå€¼ `num`ï¼Œå³è½¬æ¢åçš„æ•°å€¼ã€‚é‚£ä¹ˆæ­¤æ—¶çš„æ•´æ¡è¯­å¥å°±å˜æˆäº†è¿™æ ·ï¼Œ`let guess: u32 = num;` å³ç›¸å½“ä¸åœ¨è¿™ä¸ªæ—¶å€™ç»™ `guess` èµ‹å€¼ã€‚

å¦‚æœæ— æ³• `parse` å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ª `Err`( `Result` çš„å˜ä½“ ) åŒ…å«æœ‰å…³é”™è¯¯çš„æ›´å¤šä¿¡æ¯çš„å€¼ã€‚æ­¤æ—¶ `match` å°†ä¼šåŒ¹é…åˆ°ç¬¬äºŒä¸ª `Err` è¿™ä¾‹æƒ…å†µã€‚è¿™é‡Œçš„ `_`( `Err` ä¸­çš„å‚æ•°ï¼Œä¸‹åˆ’çº¿)ï¼Œå®ƒç±»ä¼¼ä¸€ä¸ªé€šé…ç¬¦ï¼Œä»£è¡¨ç€ä¼ è¿‡æ¥çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå³æ— è®ºè½¬æ¢çš„æ˜¯ä»€ä¹ˆå­—æ¯æˆ–ç¬¦å·ï¼Œä¸ç®¡è½¬æ¢åæ˜¯ä»€ä¹ˆï¼Œé€šé€šä¼ ç»™ `Err`ã€‚åŒ¹é…åˆ°è¿™é‡Œï¼Œå³ä»£è¡¨ç©å®¶è¾“å…¥äº†æ— æ•ˆçš„å­—ç¬¦ï¼Œæˆ‘ä»¬åº”è¯¥å‘Šè¯‰ç¨‹åºå¿½ç•¥å®ƒï¼Œå¹¶è¦æ±‚ç©å®¶é‡æ–°è¾“å…¥ï¼Œå³é‡å…¥å¾ªç¯ã€‚åœ¨ä»£ç ä¸­å¾ˆç®€å•ï¼Œä½¿ç”¨ä¸€ä¸ª `continue` è¯­å¥å³å¯ã€‚

# 12. æµ‹è¯•å¤„ç†æ— æ•ˆè¾“å…¥
è®©æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬æ–°åŠ çš„åŠŸèƒ½ã€‚
```shell
imaginemiracle:guessing_game$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 71.
Please input your guess.
hello
Please input your guess.
i'm imaginemiracle
Please input your guess.
hahahahaha
Please input your guess.
71
You guessed: 71
Yeah! You win!
```
ç°åœ¨çœ‹æ¥æˆ‘ä»¬çš„æ¸¸æˆåŠŸèƒ½éƒ½åœ¨æŒ‰é¢„æœŸåœ¨è¿›è¡Œäº†ã€‚
# 13. çŒœå­—è°œæ¸¸æˆâ€”â€”å®Œæˆ
åˆ«å¿˜è®°å°ç”·å­©çš„æé†’å“¦ï¼Œæˆ‘ä»¬è¿˜æ²¡åˆ é™¤é‚£å°†è°œåº•å‘ŠçŸ¥å¤©ä¸‹çš„è¾“å‡ºå‘¢ï¼ï¼ˆä½†æ˜¯è¿™ä¸ªè¾“å‡ºåœ¨æˆ‘ä»¬æµ‹è¯•æ—¶æ˜¯éå¸¸æœ‰ç”¨çš„ï¼‰
è®©æˆ‘ä»¬åˆ é™¤é‚£è¡Œè¾“å‡ºï¼Œå°±å¾—åˆ°äº†å®Œæ•´çš„æ¸¸æˆå•¦ï¼
```rust
use std::io;            // å¼•å…¥æ ‡å‡†åº“çš„è¾“å…¥è¾“å‡º
use rand::Rng;          // å¼•å…¥å®šä¹‰äº†éšæœºæ•°ç”Ÿæˆå‡½æ•°çš„trait
use std::cmp::Ordering; //å¼•å…¥ç”¨äºæ•°å€¼æ¯”è¾ƒçš„å‡½æ•°

fn main() {
    println!("Guess the number!");

    let secret_number = rand::thread_rng().gen_range(1..101);

    loop{

        println!("Please input your guess.");

        let mut guess = String::new();

        io::stdin()
            .read_line(&mut guess)
            .expect("Failed to read line.");
            
        let guess: u32 = match guess.trim().parse() {
            Ok(num) => num,
            Err(_) => continue,
        };

        println!("You guessed: {}", guess);

        match guess.cmp(&secret_number) {
            Ordering::Less => println!("Too small!"),
            Ordering::Greater => println!("Too big!"),
            Ordering::Equal => {
                println!("Yeah! You win!");
                break;
            },
        }
    } // End of loop
}
```
# #åˆ°æ­¤ï¼Œæ­å–œæˆ‘ä»¬æˆåŠŸç”¨Rustå®ç°äº†çŒœå­—è°œæ¸¸æˆï¼
# é™„1. ç¡®ä¿é¡¹ç›®å¯é‡å»ºçš„ Cargo.lock æ–‡ä»¶
`Cargo` æœ‰ä¸€ç§æœºåˆ¶ï¼Œå¯ç¡®ä¿æ¯æ¬¡è‡ªå·±æˆ–å…¶ä»–ä»»ä½•äººæ„å»ºä»£ç æ—¶éƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ç»„å»ºæ¥é‡å»ºï¼š`Cargo` å°†ä»…ä½¿ç”¨å¼€å‘è€…æŒ‡å®šçš„ä¾èµ–é¡¹çš„ç‰ˆæœ¬ï¼Œç›´åˆ°å¼€å‘è€…å¦æœ‰è¯´æ˜ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä¸ä¹…åç‰ˆæœ¬ `0.8.6` çš„`rand crate` ä¼šå‘å¸ƒï¼Œå¹¶ä¸”è¯¥ç‰ˆæœ¬åŒ…å«ä¸€ä¸ªé‡è¦çš„é”™è¯¯ä¿®å¤ï¼Œä½†å®ƒä¹Ÿå¯èƒ½å› æ­¤ä¼šç ´åè‡ªå·±çš„ä»£ç ã€‚ä¸ºäº†å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œ`Rust` åœ¨ç¬¬ä¸€æ¬¡è¿è¡Œ `cargo build` æ—¶åˆ›å»ºäº†`Cargo.lock` æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨åœ¨`guessing_game` ç›®å½•ä¸­æœ‰è¿™ä¸ªæ–‡ä»¶ ã€‚
```shell
imaginemiracle:guessing_game$ ls
Cargo.lock  Cargo.toml  src  target
```
å½“ç¬¬ä¸€æ¬¡æ„å»ºé¡¹ç›®æ—¶ï¼Œ`Cargo` ä¼šæ‰¾å‡ºç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰ä¾èµ–é¡¹ç‰ˆæœ¬ï¼Œç„¶åå°†å®ƒä»¬å†™å…¥ `Cargo.lock` æ–‡ä»¶ã€‚å½“æœªæ¥å†æ¬¡æ„å»ºé¡¹ç›®æ—¶ï¼Œ`Cargo` å°†æŸ¥é˜… `Cargo.lock` æ–‡ä»¶å­˜åœ¨å¹¶ä½¿ç”¨å…¶ä¸­æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯å†æ¬¡æ‰§è¡Œæ‰€æœ‰ç¡®å®šç‰ˆæœ¬çš„å·¥ä½œã€‚è¿™ä½¿å¼€å‘è€…å¯ä»¥è‡ªåŠ¨è¿›è¡Œå¯é‡ç°çš„æ„å»ºã€‚æ¢å¥è¯è¯´ï¼Œç”±äº`Cargo.lock` æ–‡ä»¶ï¼Œæ‚¨çš„é¡¹ç›®å°†ä¸€ç›´ä¿æŒä½¿ç”¨ `0.8.5` çš„ `rand` å‡½æ•°ï¼Œç›´åˆ°ä½ æ˜ç¡®éœ€è¦å‡çº§æ›´æ–°ã€‚
# é™„2. æ›´æ–° crate ç‰ˆæœ¬
å½“ä½ ç¡®å®æƒ³æ›´æ–°ä¸€ä¸ª `crate` æ—¶ï¼Œ`Cargo` ä¼šæä¾›å‡çº§å‘½ä»¤ `cargo update`ï¼Œå®ƒä¼šå¿½ç•¥ `Cargo.lock` æ–‡ä»¶å¹¶åœ¨ `Cargo.toml` ä¸­æ‰¾å‡ºç¬¦åˆä½ è§„æ ¼çš„æ‰€æœ‰æœ€æ–°ç‰ˆæœ¬ã€‚`Cargo` ä¼šå°†è¿™äº›ç‰ˆæœ¬å†™å…¥ `Cargo.lock` æ–‡ä»¶ã€‚å¦åˆ™ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ`Cargo` åªä¼šæŸ¥æ‰¾å¤§äº `0.8.5` å’Œå°äºçš„ç‰ˆæœ¬ `0.9.0`ã€‚å¦‚æœ `randcrate` å·²ç»å‘å¸ƒäº†ä¸¤ä¸ªæ–°ç‰ˆæœ¬ `0.8.6` å’Œ `0.9.0`ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœè¿è¡Œ `cargo update`ï¼Œå°†çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š
```shell
$ cargo update
    Updating crates.io index
    Updating rand v0.8.5 -> v0.8.6
```
`Cargo` ä¼šå¿½ç•¥ `0.9.0` ç‰ˆæœ¬ã€‚åŒæ—¶ï¼Œä½ ä¼šå‘ç° `Cargo.lock` æ–‡ä»¶ä¹Ÿè¢«ä¿®æ”¹ï¼Œå°† `rand` çš„ç‰ˆæœ¬æ”¹ä¸ºæœ€æ–°çš„ `rand crate 0.8.6`ã€‚å¦‚æœéœ€è¦ä½¿ç”¨åˆ° `0.9.0` æˆ– `0.9.x`ç³»åˆ—ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå¿…é¡»æ‰‹åŠ¨çš„æ›´æ–° `Cargo.toml` æ–‡ä»¶ã€‚
```bash
[dependencies]
rand = "0.9.0"
```
ä¿®æ”¹å®Œåï¼Œå½“ä¸‹æ¬¡è¿è¡Œ `cargo build` æ—¶ï¼Œ`Cargo` å°†ä¼šæ›´æ–°å¯ç”¨çš„ `crate` æ³¨å†Œè¡¨ï¼Œå¹¶é‡æ–°ä¸‹è½½ç¼–è¯‘ä½ éœ€è¦çš„æ–°ç‰ˆæœ¬ã€‚

